source('~/Documents/GitHub/ct_nba/scripts/data_clean_20220622.R', echo=TRUE)
source('~/Documents/GitHub/ct_nba/scripts/randomize_personID.R', echo=TRUE)
source('~/Documents/GitHub/SC2-kinetics-immune-history/scripts/prep_data_for_regressions.R', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
dat_subset_use %>% filter(DetectionSpeed == "Frequent testing")
dat_subset_use %>% filter(DetectionSpeed == "Frequent testing") %>% group_by(PersonID, CumulativeInfectionNumber) %>% filter(DaysSinceDetection == min(DaysSinceDetection))
dat_subset_use %>% filter(DetectionSpeed == "Frequent testing") %>% group_by(PersonID, CumulativeInfectionNumber) %>% filter(DaysSinceDetection == min(DaysSinceDetection)) %>% pull(CtT1) %>% distinct()
dat_subset_use %>% filter(DetectionSpeed == "Frequent testing") %>% group_by(PersonID, CumulativeInfectionNumber) %>% filter(DaysSinceDetection == min(DaysSinceDetection)) %>% pull(CtT1) %>% unique()
dat_subset_use %>% filter(DetectionSpeed == "Delayed detection") %>% group_by(PersonID, CumulativeInfectionNumber) %>% filter(DaysSinceDetection == min(DaysSinceDetection)) %>% pull(CtT1)
dat_subset_use %>% filter(DetectionSpeed == "Delayed detection") %>% group_by(PersonID, CumulativeInfectionNumber) %>% filter(DaysSinceDetection == min(DaysSinceDetection)) %>% pull(CtT1) %>% range()
dat_subset_use %>% filter(DetectionSpeed == "Delayed detection") %>% group_by(PersonID, CumulativeInfectionNumber) %>% filter(DaysSinceDetection == min(DaysSinceDetection)) %>% filter(CtT1 == 40)
dat_subset_use %>% filter(PersonID == 629, LineageBroad == "Omicron")
dat_subset_use %>% filter(PersonID == 629, LineageBroad == "Omicron") %<% View
dat_subset_use %>% filter(DetectionSpeed == "Delayed detection") %>% group_by(PersonID, CumulativeInfectionNumber) %>% filter(DaysSinceDetection < 0) %>% filter(DaysSinceDetection == max(DaysSinceDetection))
dat_subset_use %>% filter(DetectionSpeed == "Delayed detection") %>% group_by(PersonID, CumulativeInfectionNumber) %>% filter(DaysSinceDetection < 0) %>% filter(DaysSinceDetection == max(DaysSinceDetection)) %>% pull(DaysSinceDetection)
dat_subset_use %>% filter(DetectionSpeed == "Delayed detection") %>% group_by(PersonID, CumulativeInfectionNumber) %>% filter(DaysSinceDetection < 0) %>% filter(DaysSinceDetection == max(DaysSinceDetection)) %>% pull(DaysSinceDetection) %>% max
dat_subset_use %>% filter(DetectionSpeed == "Delayed detection") %>% group_by(PersonID, CumulativeInfectionNumber) %>% filter(DaysSinceDetection < 0) %>% filter(DaysSinceDetection == max(DaysSinceDetection)) %>% filter(DaysSinceDetection == -1)
dat_subset_use %>% filter(PersonID == 2071, LineageBroad == "Omicron")
dat_subset_use %>% filter(PersonID == 2071, LineageBroad == "Omicron") %>% View
dat_subset_use %>% filter(PersonID == 2071, LineageBroad == "Omicron",CumulativeInfectionNumber == 2) %>% View
dat_subset_use %>% filter(PersonID == 2071, LineageBroad == "Omicron") %>% View
dat_subset_use %>% filter(PersonID == 2071, LineageBroad == "Omicron",CumulativeInfectionNumber == 4) %>% View
dat %>% filter(PersonID == 2071, LineageBroad == "Omicron",CumulativeInfectionNumber == 4) %>% View
View(dat)
source('~/Documents/GitHub/SC2-kinetics-immune-history/scripts/prep_data_for_regressions.R', echo=TRUE)
dat_subset_use %>% filter(PersonID == 2071, LineageBroad == "Omicron") %>% View
